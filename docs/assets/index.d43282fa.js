import{l as I,A as h,v as e,I as y,Q as k,d as S,M,D as L,a as z,b as Z,c as A,S as P,u as R,y as j,e as V,B as p,G as O,f as g,T as $,H as N,C as Y,g as G,h as D,i as U,j as T,F as b,k as H,m as Q,n as q,o as K,p as _,L as ee,q as v,r as B,s as te,t as x,U as oe,w as ne,W as ae,x as le}from"./vendor.4fe446ec.js";const re=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const n of i.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&a(n)}).observe(document,{childList:!0,subtree:!0});function r(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerpolicy&&(i.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?i.credentials="include":l.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(l){if(l.ep)return;l.ep=!0;const i=r(l);fetch(l.href,i)}};re();const E=({url:o})=>{const[t,r]=I(!1);o||(o=`${window.location.origin}${window.location.pathname.endsWith("/")?window.location.pathname:window.location.pathname+"/"}README.md`),o.startsWith("http")||(o=`${window.location.origin}${window.location.pathname.endsWith("/")?window.location.pathname:window.location.pathname+"/"}${o}`),console.log("url",o);const a=h(()=>{r(!t)},[t]);return e(S,null,e(y,{verticalAlign:"top","aria-label":"Help",icon:e(k,null),size:"lg",onClick:a,mr:"4"}),e(ie,{url:o,isOpen:t,setOpen:r}))},ie=({isOpen:o,setOpen:t,url:r})=>{const a=h(()=>{t(!o)},[t,o]),l=h(()=>{t(!1)},[t]),i=`https://metapages.github.io/metaframe-markdown/#?url=${r}`;return e(A,{size:"full",placement:"top",onClose:a,isOpen:o,onOverlayClick:l},e(M,null,e(L,null,e(z,{size:"lg",bg:"gray.100"}),e(Z,null,e("iframe",{width:"100%",height:"100%",src:i})))))},se=({hashkey:o,options:t})=>{const[r,a]=I(!1),l=h(()=>{a(!r)},[r]);return e(S,null,e(y,{verticalAlign:"top","aria-label":"Metaframe settings",icon:e(P,null),size:"lg",onClick:l}),e(ce,{hashkey:o,isOpen:r,setOpen:a,options:t}))},ce=({hashkey:o,isOpen:t,setOpen:r,options:a})=>{const[l,i]=R(o||"options",Object.fromEntries(a.filter(s=>s.default).map(s=>[s.name,s.default]))),[n,w]=I(l||{}),[f,W]=I(void 0),J=h(s=>{const{name:d,value:c}=s.target,m=a.find(u=>u.name===d);if(!m){console.error(`No option found for name=${d}`);return}m.type==="boolean"?w({...n,[d]:c==="1"}):w({...n,[d]:c})},[n,w,a]),X=h(()=>{r(!t)},[r,t]),C=h(()=>{const s={};if(Object.keys(n).forEach(c=>{const m=a.find(u=>u.name===c);if(m&&m.validator&&m.type!=="boolean"){const u=m.validator(n[c]);u&&(s[c]=u)}}),Object.keys(s).length>0){W(s);return}W(void 0);const d={};Object.keys(n).forEach(c=>{const m=a.find(u=>u.name===c);m?m.map?d[c]=m.map(n[c]):m.type==="boolean"?d[c]=n[c]===!0||n[c]==="1"||n[c]==="true":d[c]=n[c]:d[c]=n[c]}),r(!t),i(d)},[r,t,a,n,i,W]);return j(()=>{if(!t)return;const s=d=>{d.key==="Enter"&&t&&C()};return window.addEventListener("keyup",s),()=>{window.removeEventListener("keyup",s)}},[C,t]),e(A,{placement:"top",onClose:C,isOpen:t},e(M,null,e(L,null,e(V,{borderBottomWidth:"0px"},"Configure metaframe (stored in URL hash params )"),e(Z,null,e(p,{maxW:"80%",p:2,borderWidth:"4px",borderRadius:"lg",overflow:"hidden"},e(O,{templateColumns:"repeat(12, 1fr)",gap:6},a.map(s=>e(S,null,e(g,{rowSpan:1,colSpan:4},e(p,{w:"100%",h:"100%",display:"flex",alignItems:"center",justifyContent:"flex-end"},e($,{textAlign:"right",verticalAlign:"bottom"},s.displayName||s.name,":"))),e(g,{rowSpan:1,colSpan:8}," ",de(s,n[s.name],J)))),e(g,{rowSpan:1,colSpan:12}),e(g,{rowSpan:1,colSpan:12}),e(g,{rowSpan:1,colSpan:12}),e(g,{rowSpan:1,colSpan:10}),e(g,{rowSpan:0,colSpan:2},e(N,{spacing:2,justify:"flex-end",direction:"row"},e(y,{size:"lg",color:"red",icon:e(Y,null),onClick:X}),e(y,{size:"lg",color:"green",icon:e(G,null),onClick:C})))))))))},de=(o,t,r)=>{switch(o.type){case"option":return e(T,{name:o.name,value:t,onChange:r,placeholder:"Select option"},o.options.map(a=>e("option",{value:a},a)));case"boolean":return e(U,{name:o.name,rightIcon:e(G,null),onChange:r,isChecked:t===!0||t==="1",value:t?0:1});default:return e(p,{w:"100%",h:"10"},e(D,{name:o.name,type:"text",placeholder:"",value:t,onInput:r}))}},me=[{name:"min",displayName:"A boolean option",default:!0,type:"boolean"}],ue=()=>e(b,{padding:"2px"},e(b,{flexDirection:"column"},e(F,null)),e(H,null),e(se,{options:me,hashkey:"dialoptions"}),e(E,{url:"README-dial.md"})),F=()=>{const o=Q(),[t,r]=I(0);return j(()=>{const a=o?.metaframe;if(!a)return;const l=i=>{if(i?.o?.pitch!==void 0){let n=i?.o?.pitch;const w=i?.o?.yaw;n>0&&w>0&&(n=Math.PI-n),n<0&&w<0&&(n=Math.PI*2+n);let f=n*(180/Math.PI);f<0&&(f=180-f),console.log(`deg=${f}  pitch=${i?.o?.pitch}  yaw=${i?.o?.yaw}  roll=${i?.o?.roll}`),a.setOutput("degrees",f),a.setOutput("pitch",n),r(f)}};return a.onInputs(l),()=>{a.removeListener(q.INPUTS,l)}},[o,r]),e(K,{diameter:200,min:1,max:360,step:1,value:Math.floor(t),theme:{defaultColor:"#333",activeColor:"#f33"},onValueChange:r})},pe=({url:o})=>{const t=`${o.replace("https://mermaid.ink/img/","https://mermaid-js.github.io/mermaid-live-editor/edit#")}`;return e(ee,{href:t},e(_,{src:o}))},fe=[{name:"dial",title:"Dial",image:e(pe,{url:"https://mermaid.ink/img/eyJjb2RlIjoiZ3JhcGggTFJcbiAgaW5wdXRbXCJ7IG86IHsgcm9sbCwgcGl0Y2gsIHlhdyB9IFwiXSAtLT4gbWV0YWZyYW1le0RpYWx9XG4gIG1ldGFmcmFtZSAtLT4gfFwiMCAuLi4gMvCdm5EgXCJ8IHJhZGlhbnNbXCJyYWRpYW5zICBcIl1cbiAgbWV0YWZyYW1lIC0tPiB8XCIwIC4uLiAzNjAgXCJ8IGRlZ3JlZXNbXCJkZWdyZWVzIFwiXVxuICBtZXRhZnJhbWUgLS0-IHxcImNvbmZpZ3VyYWJsZSAwIC4uLiBuICBcInwgdmFsdWVbXCJ2YWx1ZVwiXSIsIm1lcm1haWQiOnsidGhlbWUiOiJkZWZhdWx0In0sInVwZGF0ZUVkaXRvciI6ZmFsc2UsImF1dG9TeW5jIjp0cnVlLCJ1cGRhdGVEaWFncmFtIjpmYWxzZX0"}),description:e(oe,null,e(x,null,"Map one rotation direction to a dial controler"),e(x,null,"Configurable scaled range (e.g. 1-10, 1-150)"),e(x,null,"Configurable: always start at zero")),object:e(F,null)}],he=()=>(v("mode"),e(p,{w:"100%",p:4},e(b,null,e(b,{stretch:!0,flexDirection:"column"},e(p,{w:"100%",p:2},e(B,{size:"md"},"Motion to control")),e(p,{w:"10px",h:"20px"}),fe.map((o,t)=>e(ge,{key:t,...o}))),e(H,null),e(E,null)))),ge=({title:o,name:t,image:r,description:a,object:l})=>{const[i,n]=v("mode");return e(p,{as:"article",p:"5",borderWidth:"1px",rounded:"md"},e(te,{columns:3,spacing:10},e(p,{as:"button",w:"100%",onClick:()=>n(t,{modifyHistory:!0})},e(b,{flexDirection:"column"},e(B,{size:"md",my:"2"},o),a)),r,l))},we=()=>{const[o]=v("mode");switch(o){case"dial":return e(ue,null);default:return e(he,null)}};ne(e(le,null,e(ae,null,e(we,null))),document.getElementById("root"));
//# sourceMappingURL=index.d43282fa.js.map

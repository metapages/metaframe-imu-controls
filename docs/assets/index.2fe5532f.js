import{l as f,A,v as e,I as X,Q as D,d as x,M as v,D as G,a as U,b as J,c as L,S as $,u as T,y,e as Q,B as u,G as q,f as p,T as K,H as _,C as ee,g as V,h as te,i as B,j as ne,F as w,k as Z,m as R,n as H,o as oe,p as ie,L as j,q as S,r as Y,s as ae,V as le,U as M,t as b,E as ce,w as re,W as se,x as Ie}from"./vendor.55c2fa88.js";const ge=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const o of c.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function l(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerpolicy&&(c.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?c.credentials="include":a.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(a){if(a.ep)return;a.ep=!0;const c=l(a);fetch(a.href,c)}};ge();const F=({url:n})=>{const[t,l]=f(!1);n||(n=`${window.location.origin}${window.location.pathname.endsWith("/")?window.location.pathname:window.location.pathname+"/"}README.md`),n.startsWith("http")||(n=`${window.location.origin}${window.location.pathname.endsWith("/")?window.location.pathname:window.location.pathname+"/"}${n}`);const i=A(()=>{l(!t)},[t]);return e(x,null,e(X,{verticalAlign:"top","aria-label":"Help",icon:e(D,null),size:"lg",onClick:i,mr:"4"}),e(de,{url:n,isOpen:t,setOpen:l}))},de=({isOpen:n,setOpen:t,url:l})=>{const i=A(()=>{t(!n)},[t,n]),a=A(()=>{t(!1)},[t]),c=`https://metapages.github.io/metaframe-markdown/#?url=${l}`;return e(L,{size:"full",placement:"top",onClose:i,isOpen:n,onOverlayClick:a},e(v,null,e(G,null,e(U,{size:"lg",bg:"gray.100"}),e(J,null,e("iframe",{width:"100%",height:"100%",src:c})))))},z=({hashkey:n,options:t})=>{const[l,i]=f(!1),a=A(()=>{i(!l)},[l]);return e(x,null,e(X,{verticalAlign:"top","aria-label":"Metaframe settings",icon:e($,null),size:"lg",onClick:a}),e(Ce,{hashkey:n,isOpen:l,setOpen:i,options:t}))},Ce=({hashkey:n,isOpen:t,setOpen:l,options:i})=>{const[a,c]=T(n||"options",Object.fromEntries(i.filter(r=>r.default).map(r=>[r.name,r.default]))),[o,C]=f(a||{}),[d,h]=f(void 0),N=A(r=>{const{name:I,value:s}=r.target,g=i.find(m=>m.name===I);if(!g){console.error(`No option found for name=${I}`);return}g.type==="boolean"?C({...o,[I]:s==="1"}):C({...o,[I]:s})},[o,C,i]),P=A(()=>{l(!t)},[l,t]),W=A(()=>{const r={};if(Object.keys(o).forEach(s=>{const g=i.find(m=>m.name===s);if(g&&g.validator&&g.type!=="boolean"){const m=g.validator(o[s]);m&&(r[s]=m)}}),Object.keys(r).length>0){h(r);return}h(void 0);const I={};Object.keys(o).forEach(s=>{const g=i.find(m=>m.name===s);g?g.map?I[s]=g.map(o[s]):g.type==="boolean"?I[s]=o[s]===!0||o[s]==="1"||o[s]==="true":I[s]=o[s]:I[s]=o[s]}),l(!t),c(I)},[l,t,i,o,c,h]);return y(()=>{if(!t)return;const r=I=>{I.key==="Enter"&&t&&W()};return window.addEventListener("keyup",r),()=>{window.removeEventListener("keyup",r)}},[W,t]),e(L,{placement:"top",onClose:W,isOpen:t},e(v,null,e(G,null,e(Q,{borderBottomWidth:"0px"},"Configure metaframe (stored in URL hash params )"),e(J,null,e(u,{maxW:"80%",p:2,borderWidth:"4px",borderRadius:"lg",overflow:"hidden"},e(q,{templateColumns:"repeat(12, 1fr)",gap:6},i.map(r=>e(x,null,e(p,{rowSpan:1,colSpan:4},e(u,{w:"100%",h:"100%",display:"flex",alignItems:"center",justifyContent:"flex-end"},e(K,{textAlign:"right",verticalAlign:"bottom"},r.displayName||r.name,":"))),e(p,{rowSpan:1,colSpan:8}," ",ue(r,o[r.name],N)))),e(p,{rowSpan:1,colSpan:12}),e(p,{rowSpan:1,colSpan:12}),e(p,{rowSpan:1,colSpan:12}),e(p,{rowSpan:1,colSpan:10}),e(p,{rowSpan:0,colSpan:2},e(_,{spacing:2,justify:"flex-end",direction:"row"},e(X,{size:"lg",color:"red",icon:e(ee,null),onClick:P}),e(X,{size:"lg",color:"green",icon:e(V,null),onClick:W})))))))))},ue=(n,t,l)=>{switch(n.type){case"option":return e(ne,{name:n.name,value:t,onChange:l,placeholder:"Select option"},n.options.map(i=>e("option",{value:i},i)));case"boolean":return e(B,{name:n.name,rightIcon:e(V,null),onChange:l,isChecked:t===!0||t==="1",value:t?0:1});default:return e(u,{w:"100%",h:"10"},e(te,{name:n.name,type:"text",placeholder:"",value:t,onInput:l}))}},me=[{name:"min",displayName:"A boolean option",default:!0,type:"boolean"}],Ae=()=>e(w,{padding:"2px"},e(w,{flexDirection:"column"},e(k,null)),e(Z,null),e(z,{options:me,hashkey:"dialoptions"}),e(F,{url:"README-dial.md"})),k=()=>{const n=R(),[t,l]=f(0);return y(()=>{const i=n?.metaframe;if(!i)return;const a=c=>{if(c?.o?.pitch!==void 0){let o=c?.o?.pitch;const C=c?.o?.yaw;o>0&&C>0&&(o=Math.PI-o),o<0&&C<0&&(o=Math.PI*2+o);let d=o*(180/Math.PI);d<0&&(d=180-d),i.setOutput("degrees",d),i.setOutput("radians",o),l(d)}};return i.onInputs(a),()=>{i.removeListener(H.INPUTS,a)}},[n,l]),y(()=>{n?.metaframe?.setOutput("value",t)},[t,n]),e(oe,{diameter:200,min:1,max:360,step:1,value:Math.floor(t),theme:{defaultColor:"#333",activeColor:"#f33"},onValueChange:l})},pe=[{name:"min",displayName:"A boolean option",default:!0,type:"boolean"}],he=()=>e(w,{padding:"2px"},e(w,{flexDirection:"column"},e(O,null)),e(Z,null),e(z,{options:pe,hashkey:"dialoptions"}),e(F,{url:"README-switch.md"})),O=()=>{const n=R(),[t,l]=f(!1);return y(()=>{const i=n?.metaframe;if(!i)return;const a=c=>{if(c?.o?.pitch!==void 0){let o=c?.o?.pitch;const C=c?.o?.yaw;o>0&&C>0&&(o=Math.PI-o),o<0&&C<0&&(o=Math.PI*2+o);let d=o*(180/Math.PI);d<0&&(d=180-d);const h=d>90;i.setOutput("switch",h),l(h)}};return i.onInputs(a),()=>{i.removeListener(H.INPUTS,a)}},[n,l]),e(B,{size:"lg",isChecked:t})},E=({url:n})=>{const t=`${n.replace("https://mermaid.ink/img/","https://mermaid-js.github.io/mermaid-live-editor/edit#").replace("https://mermaid.ink/svg/","https://mermaid-js.github.io/mermaid-live-editor/edit#")}`;return e(j,{href:t},e(ie,{src:n}))},fe=[{name:"dial",title:"Dial",image:e(E,{url:"https://mermaid.ink/svg/eyJjb2RlIjoiZ3JhcGggTFJcbiAgaW5wdXRbXCJ7IG86IHsgcm9sbCwgcGl0Y2gsIHlhdyB9ICZlbnNwOyAmZW5zcDtcIl0gLS0-IG1ldGFmcmFtZXtEaWFsfVxuICBtZXRhZnJhbWUgLS0-IHxcIjAgLi4uIDLwnZuRICZlbnNwO1wifCByYWRpYW5zW1wicmFkaWFucyAgXCJdXG4gIG1ldGFmcmFtZSAtLT4gfFwiMCAuLi4gMzYwICZlbnNwO1wifCBkZWdyZWVzW1wiZGVncmVlcyBcIl1cbiAgbWV0YWZyYW1lIC0tPiB8XCJjb25maWd1cmFibGUgMCAuLi4gbiAgJmVuc3A7XCJ8IHZhbHVlW1widmFsdWVcIl0iLCJtZXJtYWlkIjp7InRoZW1lIjoiZGVmYXVsdCJ9LCJ1cGRhdGVFZGl0b3IiOmZhbHNlLCJhdXRvU3luYyI6dHJ1ZSwidXBkYXRlRGlhZ3JhbSI6ZmFsc2V9"}),description:e("div",null,e(M,null,e(b,null,"Map one rotation direction to a switch"),e(b,null,"Configurable scaled range (e.g. 1-10, 1-150)"),e(b,null,"Configurable: always start at zero"),e(b,null,e(j,{href:"https://app.metapages.org/#?definition=IntcbiAgXCJ2ZXJzaW9uXCI6IFwiMC4zXCIsXG4gIFwibWV0YVwiOiB7XG4gICAgXCJsYXlvdXRzXCI6IHtcbiAgICAgIFwiZmxleGJveGdyaWRcIjoge1xuICAgICAgICBcImRvY3NcIjogXCJodHRwOi8vZmxleGJveGdyaWQuY29tL1wiLFxuICAgICAgICBcImxheW91dFwiOiBbXG4gICAgICAgICAgW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBcIm5hbWVcIjogXCJkaWFsXCIsXG4gICAgICAgICAgICAgIFwid2lkdGhcIjogXCJjb2wteHMtNFwiLFxuICAgICAgICAgICAgICBcInN0eWxlXCI6IHtcbiAgICAgICAgICAgICAgICBcIm1heEhlaWdodFwiOiBcIjYwMHB4XCIsXG4gICAgICAgICAgICAgICAgXCJvdmVyZmxvd1lcIjogXCJoaWRkZW5cIlxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBcInVybFwiOiBcImh0dHBzOi8vbWV0YXBhZ2VzLm9yZy9tZXRhZnJhbWVzL3Bhc3N0aHJvdWdoLWFycm93Lz9yb3RhdGlvbj05MFwiLFxuICAgICAgICAgICAgICBcIndpZHRoXCI6IFwiY29sLXhzLTFcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgXCJuYW1lXCI6IFwicGxvdFwiLFxuICAgICAgICAgICAgICBcIndpZHRoXCI6IFwiY29sLXhzLTdcIlxuICAgICAgICAgICAgfVxuICAgICAgICAgIF1cbiAgICAgICAgXVxuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgXCJtZXRhZnJhbWVzXCI6IHtcbiAgICBcImRpYWxcIjoge1xuICAgICAgXCJ1cmxcIjogXCJodHRwczovL21ldGFwYWdlcy5naXRodWIuaW8vbWV0YWZyYW1lLWltdS1jb250cm9scy8jP21vZGU9ZGlhbFwiXG4gICAgfSxcbiAgICBcInBsb3RcIjoge1xuICAgICAgXCJ1cmxcIjogXCJodHRwczovL21ldGFwYWdlcy5vcmcvbWV0YWZyYW1lcy9ncmFwaC1keW5hbWljL1wiLFxuICAgICAgXCJpbnB1dHNcIjogW1xuICAgICAgICB7XG4gICAgICAgICAgXCJtZXRhZnJhbWVcIjogXCJkaWFsXCIsXG4gICAgICAgICAgXCJzb3VyY2VcIjogXCJ2YWx1ZVwiLFxuICAgICAgICAgIFwidGFyZ2V0XCI6IFwieVwiXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9XG4gIH0sXG4gIFwicGx1Z2luc1wiOiBbXG4gICAgXCJodHRwczovL21ldGFwYWdlcy5naXRodWIuaW8vbWV0YWZyYW1lLWVkaXRvci9cIlxuICBdXG59Ig==",isExternal:!0},"Live example ",e(ce,{mx:"2px"}))))),object:e(k,null)},{name:"switch",title:"Switch",image:e(E,{url:"https://mermaid.ink/svg/eyJjb2RlIjoiZ3JhcGggTFJcbiAgaW5wdXRbXCJ7IG86IHsgcm9sbCwgcGl0Y2gsIHlhdyB9ICZlbnNwOyAmZW5zcDsgXCJdIC0tPiBtZXRhZnJhbWV7RGlhbH1cbiAgbWV0YWZyYW1lIC0tPiB8XCJ0cnVlIHwgZmFsc2UgJmVuc3A7IFwifCBzd2l0Y2hbXCJzd2l0Y2ggIFwiXVxuIiwibWVybWFpZCI6eyJ0aGVtZSI6ImRlZmF1bHQifSwidXBkYXRlRWRpdG9yIjpmYWxzZSwiYXV0b1N5bmMiOnRydWUsInVwZGF0ZURpYWdyYW0iOmZhbHNlfQ"}),description:e(M,null,e(b,null,"Map one rotation direction to a dial controller")),object:e(O,null)}],we=()=>e(u,{w:"100%",p:4},e(w,null,e(w,{stretch:!0,flexDirection:"column"},e(u,{w:"100%",p:2},e(S,{size:"md"},"Motion to control")),e(u,{w:"10px",h:"20px"}),fe.map((n,t)=>e(be,{key:t,...n}))),e(Z,null),e(F,null))),be=({title:n,name:t,image:l,description:i,object:a})=>{const[c,o]=Y("mode");return e(u,{p:"5",borderWidth:"1px",rounded:"md"},e(ae,{columns:3,spacing:10},e(u,{w:"100%",onClick:C=>{o(t,{modifyHistory:!0})}},e(S,{size:"md",my:"2"},n),e(le,null,i)),l,e(u,{w:"100%",onClick:()=>o(t,{modifyHistory:!0})},a)))},We=()=>{const[n]=Y("mode");switch(n){case"dial":return e(Ae,null);case"switch":return e(he,null);default:return e(we,null)}};re(e(Ie,null,e(se,null,e(We,null))),document.getElementById("root"));
//# sourceMappingURL=index.2fe5532f.js.map

import{l as y,A as g,v as e,I as W,Q as z,d as Z,M as A,D as G,a as U,b as X,c as H,S as $,u as D,y as v,e as T,B as h,G as Q,f as w,T as q,H as K,C as _,g as Y,h as ee,i as F,j as te,F as I,k as M,m as J,n as L,o as ne,p as oe,L as ae,q as x,r as V,s as le,t as S,U as B,w as ie,W as re,x as se}from"./vendor.3282fa8a.js";const ce=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const r of l)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function i(l){const r={};return l.integrity&&(r.integrity=l.integrity),l.referrerpolicy&&(r.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?r.credentials="include":l.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(l){if(l.ep)return;l.ep=!0;const r=i(l);fetch(l.href,r)}};ce();const R=({url:n})=>{const[t,i]=y(!1);n||(n=`${window.location.origin}${window.location.pathname.endsWith("/")?window.location.pathname:window.location.pathname+"/"}README.md`),n.startsWith("http")||(n=`${window.location.origin}${window.location.pathname.endsWith("/")?window.location.pathname:window.location.pathname+"/"}${n}`),console.log("url",n);const a=g(()=>{i(!t)},[t]);return e(Z,null,e(W,{verticalAlign:"top","aria-label":"Help",icon:e(z,null),size:"lg",onClick:a,mr:"4"}),e(de,{url:n,isOpen:t,setOpen:i}))},de=({isOpen:n,setOpen:t,url:i})=>{const a=g(()=>{t(!n)},[t,n]),l=g(()=>{t(!1)},[t]),r=`https://metapages.github.io/metaframe-markdown/#?url=${i}`;return e(H,{size:"full",placement:"top",onClose:a,isOpen:n,onOverlayClick:l},e(A,null,e(G,null,e(U,{size:"lg",bg:"gray.100"}),e(X,null,e("iframe",{width:"100%",height:"100%",src:r})))))},j=({hashkey:n,options:t})=>{const[i,a]=y(!1),l=g(()=>{a(!i)},[i]);return e(Z,null,e(W,{verticalAlign:"top","aria-label":"Metaframe settings",icon:e($,null),size:"lg",onClick:l}),e(me,{hashkey:n,isOpen:i,setOpen:a,options:t}))},me=({hashkey:n,isOpen:t,setOpen:i,options:a})=>{const[l,r]=D(n||"options",Object.fromEntries(a.filter(s=>s.default).map(s=>[s.name,s.default]))),[o,p]=y(l||{}),[d,b]=y(void 0),N=g(s=>{const{name:m,value:c}=s.target,u=a.find(f=>f.name===m);if(!u){console.error(`No option found for name=${m}`);return}u.type==="boolean"?p({...o,[m]:c==="1"}):p({...o,[m]:c})},[o,p,a]),P=g(()=>{i(!t)},[i,t]),C=g(()=>{const s={};if(Object.keys(o).forEach(c=>{const u=a.find(f=>f.name===c);if(u&&u.validator&&u.type!=="boolean"){const f=u.validator(o[c]);f&&(s[c]=f)}}),Object.keys(s).length>0){b(s);return}b(void 0);const m={};Object.keys(o).forEach(c=>{const u=a.find(f=>f.name===c);u?u.map?m[c]=u.map(o[c]):u.type==="boolean"?m[c]=o[c]===!0||o[c]==="1"||o[c]==="true":m[c]=o[c]:m[c]=o[c]}),i(!t),r(m)},[i,t,a,o,r,b]);return v(()=>{if(!t)return;const s=m=>{m.key==="Enter"&&t&&C()};return window.addEventListener("keyup",s),()=>{window.removeEventListener("keyup",s)}},[C,t]),e(H,{placement:"top",onClose:C,isOpen:t},e(A,null,e(G,null,e(T,{borderBottomWidth:"0px"},"Configure metaframe (stored in URL hash params )"),e(X,null,e(h,{maxW:"80%",p:2,borderWidth:"4px",borderRadius:"lg",overflow:"hidden"},e(Q,{templateColumns:"repeat(12, 1fr)",gap:6},a.map(s=>e(Z,null,e(w,{rowSpan:1,colSpan:4},e(h,{w:"100%",h:"100%",display:"flex",alignItems:"center",justifyContent:"flex-end"},e(q,{textAlign:"right",verticalAlign:"bottom"},s.displayName||s.name,":"))),e(w,{rowSpan:1,colSpan:8}," ",ue(s,o[s.name],N)))),e(w,{rowSpan:1,colSpan:12}),e(w,{rowSpan:1,colSpan:12}),e(w,{rowSpan:1,colSpan:12}),e(w,{rowSpan:1,colSpan:10}),e(w,{rowSpan:0,colSpan:2},e(K,{spacing:2,justify:"flex-end",direction:"row"},e(W,{size:"lg",color:"red",icon:e(_,null),onClick:P}),e(W,{size:"lg",color:"green",icon:e(Y,null),onClick:C})))))))))},ue=(n,t,i)=>{switch(n.type){case"option":return e(te,{name:n.name,value:t,onChange:i,placeholder:"Select option"},n.options.map(a=>e("option",{value:a},a)));case"boolean":return e(F,{name:n.name,rightIcon:e(Y,null),onChange:i,isChecked:t===!0||t==="1",value:t?0:1});default:return e(h,{w:"100%",h:"10"},e(ee,{name:n.name,type:"text",placeholder:"",value:t,onInput:i}))}},pe=[{name:"min",displayName:"A boolean option",default:!0,type:"boolean"}],fe=()=>e(I,{padding:"2px"},e(I,{flexDirection:"column"},e(O,null)),e(M,null),e(j,{options:pe,hashkey:"dialoptions"}),e(R,{url:"README-dial.md"})),O=()=>{const n=J(),[t,i]=y(0);return v(()=>{const a=n?.metaframe;if(!a)return;const l=r=>{if(r?.o?.pitch!==void 0){let o=r?.o?.pitch;const p=r?.o?.yaw;o>0&&p>0&&(o=Math.PI-o),o<0&&p<0&&(o=Math.PI*2+o);let d=o*(180/Math.PI);d<0&&(d=180-d),console.log(`deg=${d}  pitch=${r?.o?.pitch}  yaw=${r?.o?.yaw}  roll=${r?.o?.roll}`),a.setOutput("degrees",d),a.setOutput("pitch",o),i(d)}};return a.onInputs(l),()=>{a.removeListener(L.INPUTS,l)}},[n,i]),e(ne,{diameter:200,min:1,max:360,step:1,value:Math.floor(t),theme:{defaultColor:"#333",activeColor:"#f33"},onValueChange:i})},he=[{name:"min",displayName:"A boolean option",default:!0,type:"boolean"}],ge=()=>e(I,{padding:"2px"},e(I,{flexDirection:"column"},e(k,null)),e(M,null),e(j,{options:he,hashkey:"dialoptions"}),e(R,{url:"README-switch.md"})),k=()=>{const n=J(),[t,i]=y(!1);return v(()=>{const a=n?.metaframe;if(!a)return;const l=r=>{if(r?.o?.pitch!==void 0){let o=r?.o?.pitch;const p=r?.o?.yaw;o>0&&p>0&&(o=Math.PI-o),o<0&&p<0&&(o=Math.PI*2+o);let d=o*(180/Math.PI);d<0&&(d=180-d);const b=d>90;a.setOutput("switch",b),i(b)}};return a.onInputs(l),()=>{a.removeListener(L.INPUTS,l)}},[n,i]),e(F,{size:"lg",isChecked:t})},E=({url:n})=>{const t=`${n.replace("https://mermaid.ink/img/","https://mermaid-js.github.io/mermaid-live-editor/edit#")}`;return e(ae,{href:t},e(oe,{src:n}))},we=[{name:"dial",title:"Dial",image:e(E,{url:"https://mermaid.ink/svg/eyJjb2RlIjoiZ3JhcGggTFJcbiAgaW5wdXRbXCJ7IG86IHsgcm9sbCwgcGl0Y2gsIHlhdyB9IFwiXSAtLT4gbWV0YWZyYW1le0RpYWx9XG4gIG1ldGFmcmFtZSAtLT4gfFwiMCAuLi4gMvCdm5EgXCJ8IHJhZGlhbnNbXCJyYWRpYW5zICBcIl1cbiAgbWV0YWZyYW1lIC0tPiB8XCIwIC4uLiAzNjAgXCJ8IGRlZ3JlZXNbXCJkZWdyZWVzIFwiXVxuICBtZXRhZnJhbWUgLS0-IHxcImNvbmZpZ3VyYWJsZSAwIC4uLiBuICBcInwgdmFsdWVbXCJ2YWx1ZVwiXSIsIm1lcm1haWQiOnsidGhlbWUiOiJkZWZhdWx0In0sInVwZGF0ZUVkaXRvciI6dHJ1ZSwiYXV0b1N5bmMiOnRydWUsInVwZGF0ZURpYWdyYW0iOnRydWV9"}),description:e(B,null,e(S,null,"Map one rotation direction to a switch"),e(S,null,"Configurable scaled range (e.g. 1-10, 1-150)"),e(S,null,"Configurable: always start at zero")),object:e(O,null)},{name:"switch",title:"Switch",image:e(E,{url:"https://mermaid.ink/svg/eyJjb2RlIjoiZ3JhcGggTFJcbiAgaW5wdXRbXCJ7IG86IHsgcm9sbCwgcGl0Y2gsIHlhdyB9IFwiXSAtLT4gbWV0YWZyYW1le0RpYWx9XG4gIG1ldGFmcmFtZSAtLT4gfFwidHJ1ZSB8IGZhbHNlIFwifCBzd2l0Y2hbXCJzd2l0Y2ggIFwiXVxuIiwibWVybWFpZCI6eyJ0aGVtZSI6ImRlZmF1bHQifSwidXBkYXRlRWRpdG9yIjpmYWxzZSwiYXV0b1N5bmMiOnRydWUsInVwZGF0ZURpYWdyYW0iOmZhbHNlfQ"}),description:e(B,null,e(S,null,"Map one rotation direction to a dial controler")),object:e(k,null)}],Ie=()=>(x("mode"),e(h,{w:"100%",p:4},e(I,null,e(I,{stretch:!0,flexDirection:"column"},e(h,{w:"100%",p:2},e(V,{size:"md"},"Motion to control")),e(h,{w:"10px",h:"20px"}),we.map((n,t)=>e(be,{key:t,...n}))),e(M,null),e(R,null)))),be=({title:n,name:t,image:i,description:a,object:l})=>{const[r,o]=x("mode");return e(h,{as:"article",p:"5",borderWidth:"1px",rounded:"md"},e(le,{columns:3,spacing:10},e(h,{as:"button",w:"100%",onClick:()=>o(t,{modifyHistory:!0})},e(I,{flexDirection:"column"},e(V,{size:"md",my:"2"},n),a)),i,l))},ye=()=>{const[n]=x("mode");switch(n){case"dial":return e(fe,null);case"switch":return e(ge,null);default:return e(Ie,null)}};ie(e(se,null,e(re,null,e(ye,null))),document.getElementById("root"));
//# sourceMappingURL=index.c1805878.js.map
